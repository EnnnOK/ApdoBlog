# Linux awk&sed 命令简单学习

在Linux上，之前我一般用grep来处理控制台输出的信息，grep用正则可以很快的找到想要的数据展示出来。如果查看文件里面的内容的话，一般用vim来操作，cat用的很少。

但是如果要在shell脚本里面找到指定的信息，用grep就不够了，因为grep只能正则拿到一行的信息，一行里面有很多字段，这时候就需要另外的命令了。

先说sed，sed是针对行处理的。在前一个命令中获得的结果后有许多行结果，这个时候通过sed可以选择按行来输出一部分结果。
```shell
ls -l  # 可以获取到全部的结果
ls -l | sed -n '1p'  # 只要第1行的结果
ls -l | sed -n '1,5p' # 要第1行到第5行的结果
ls -l | sed '1d' # 删掉第1行的结果，打印后面的结果
```

出了d,p之外，还有其他几个关键字。

然后是awk，awk是针对行里面的字段来进行处理的，用 '{print $0}' 来展示出来想要的字段，$0表示整行。awk默认是按空格来分割，$1表示第一个块，$2表示第二个块，以此类推。反向的话，NF关键字表示一行所有的数量，Nf-1表示倒数第一个字段。比如'{print $(NF-1)}'表示最后一个字。NR关键字是所有的行的关键字。如果不想要默认的按空格来分割，可以通过 -F '' 来指定分割符。另外awk还可以加入判断条件。
awk用来处理文件的话，则是awk+条件+文件名
```shell
ls -l | awk '{print $0}' # 打印所有行的所有字段
ls -l | awk '{print $1}' # 打印所有行的按空格分割后的第一个字段
ls -l | awk '{print $(NR-1)}' # 打印所有行的按空格分割后的最后有一个字段
ls -l | awk -F ':' '{print $1}' # 打印所有行的按冒号分割后的第一个字段
ls -l | awk 'if NR==1 {print $1}' # 打印第一行的按空格分割后的第一个字段
ls -l | awk 'if NR>2 {print $1}' # 打印行数大于第二行的按空格分割后的第一个字段
awk -F ';' 'if NR>2 {print NR ' ' $1}' test.log # 打印test.log中行号大于2的行号和按空格分割后的第一个字段。
```

有了awk和sed后，在shell脚本里面处理文本获取变量就变得比较轻松了。awk的命令更加强大，还有很多没用到，需要后面继续学习。
奇怪的是awk好像没有--help命令。
```shell
awk: not an option: --help
```

学习awk参考链接：
[http://www.ruanyifeng.com/blog/2018/11/awk.html](http://www.ruanyifeng.com/blog/2018/11/awk.html)
